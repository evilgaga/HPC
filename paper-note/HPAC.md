### 解决的问题：

​	提出一个用于评估近似计算技术在 HPC OpenMP 应用中有效性的框架

### 背景：

三种近似技术：

- **Loop Perforation**：通过跳过循环迭代来减少计算量，从而提高性能
- **Input Memoization, iACT**：缓存函数调用的结果，当相同的输入再次出现时直接返回缓存结果，避免重复计算
- **Output Memoization, TAF**：利用函数输出的时间局部性，即连续调用相同的函数会产生相似的结果，从而缓存函数输出并预测后续调用结果。

### DIfficulties：

选择合适的参数和技术

### 实现

- 组成部分：

  - **编程模型**： 基于 pragma 注解的编程模型，**用于指定近似计算区域和选择近似技术**。

  - **编译器扩展**： 基于 LLVM/Clang 编译器扩展，实现 HPAC 编程模型的语义，并生成相应的 LLVM IR 代码。

  - **运行时系统**： 实现 HPAC 运行时支持，执行近似计算语义，并提供必要的并行执行支持。

  - **预处理脚本**： 自动生成不同近似配置的代码实例，并准备实验数据。

  - **驱动脚本**： 自动编译和执行代码实例，并收集性能和准确性数据，进行结果分析。

### 实验：

 **实验方法**：

-  选择八个不同的 HPC 应用程序，LULESH、HPCCG、Leukocyte、LavaMD、CFD、K-Means、Particle Filter 和 Black-Scholes。
- 使用性能分析工具识别每个应用程序的热点区域，即对应用程序性能贡献最大的代码区域。
- 使用 HPAC 预处理脚本生成不同近似配置的代码实例，包括近似实例和准确实例。
- 对每种近似技术测试不同的参数值，例如跳过比例、表大小、距离阈值、滑动窗口大小等。
-  使用平均执行时间来衡量性能，使用 MAPE（**平均绝对百分比误差**） 和 MCR （**错误分类率**）来衡量准确性损失。
- 使用 Intel Xeon E5-2695 v4 处理器和 128GB 内存进行实验。

**实验结果**：

- 在某些应用程序中，近似计算技术可以显著提高性能，例如 LULESH 和 CFD。
- 近似计算技术会导致一定的准确性损失，但通常在可接受的范围内。
- 不同近似技术对性能和准确性的影响不同。例如，循环穿孔在 LULESH 和 CFD 中表现良好，而输入备忘录在 K-Means 中表现良好。
- 不同参数设置对性能和准确性的影响不同。例如，随机循环穿孔在 CFD 中表现最佳，而较小的表大小在 iACT 中表现最佳。
- 近似计算技术与并行执行之间存在复杂的相互作用。例如，在 LULESH 中，近似计算可以减少内存访问，从而提高并行执行效率；而在 Leukocyte 中，近似计算会加剧负载不平衡，从而限制性能提升。

**3. 实验结论**：

- **近似计算技术可以显著提高 HPC 应用程序的性能，但其有效性取决于应用程序的特性**。
- **选择合适的近似技术和参数需要综合考虑应用程序特性、性能和准确性目标**。
- **近似计算技术与并行执行之间存在复杂的相互作用，需要仔细分析和调整**。
- **HPAC 框架可以帮助开发人员评估和选择近似计算技术，并分析性能和准确性权衡**。

**4. 实验结果**：

- **LULESH**： 在 LULESH 中，输出备忘录 (TAF) 在 VO 和 HG 函数上取得了显著的性能提升，分别达到了 1.4× 和 1.7× 的加速比，同时只引入了 0.1% 的误差。
- **CFD**： 在 CFD 中，循环穿孔和输出备忘录 (TAF) 都取得了良好的性能提升，而随机循环穿孔表现最佳，达到了 1.5× 的加速比，同时只引入了 0.5% 的误差。
- **K-Means**： 在 K-Means 中，输入备忘录 (iACT) 在 FNP 函数上取得了显著的性能提升，达到了 3.3× 的加速比，同时只引入了 10% 的误差。
- **Leukocyte**： 在 Leukocyte 中，输出备忘录 (TAF) 在 UCL 函数上取得了显著的性能提升，达到了 3.9× 的加速比，同时只引入了 1.15% 的误差。
- **Particle Filter**： 在 Particle Filter 中，循环穿孔在 FD 函数上取得了显著的性能提升，达到了 11× 的加速比，同时只引入了 1.4% 的误差。

### 涉及的概念

#### LULESH

（Livermore Unstructured Lagrangian Explicit Shock Hydrodynamics）是一个用于模拟流体动力学问题的代理应用程序，它模拟了三维欧拉方程在离散的拉格朗日网格上的解。LULESH 旨在模拟冲击波在流体中的传播，并评估代码的性能和可扩展性。

### Leukocyte 

一个用于检测和跟踪血液血管中滚动白细胞（白细胞）的视频显微镜应用程序。它通过迭代视频帧并更新白细胞的位置来实现这一点。

- Leukocyte 用于研究血液流动和白细胞行为，这对于理解免疫反应和疾病机制至关重要。
- Leukocyte 使用 OpenMP 并行化，并且是 Rodinia 基准测试套件的一部分。

### Particle Filter

一个用于统计估计目标对象位置的应用程序。通过分析带有噪声的测量值来实现。